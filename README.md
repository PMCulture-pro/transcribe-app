# Transcribe App

**Локальная транскрибация аудио и видео файлов на macOS с использованием AI**

Быстро и просто превращайте речь из видео и аудио записей в текст прямо на вашем Mac. Все работает локально, без интернета и без передачи данных куда-либо.

---

## Особенности

- **Быстрая работа** - оптимизировано для Apple Silicon (M1/M2/M3/M4)
- **Полностью локально** - все данные остаются на вашем компьютере
- **Простота использования** - правый клик → "Транскрибировать"
- **Поддержка видео** - автоматически извлекает аудио из .mov, .mp4, .avi и др.
- **Поддержка аудио** - работает с .mp3, .wav, .m4a и др.
- **Русский язык** - отличное распознавание русской речи
- **Чистый текст** - результат сохраняется рядом с исходным файлом
- **Бесплатно** - открытый исходный код, никаких подписок

---

## Требования

- **macOS** 11.0 (Big Sur) или новее
- **Apple Silicon** (M1/M2/M3/M4)
- **~3.5 GB** свободного места на диске
- **Интернет** только для установки (после установки работает offline)

---

## Установка

### Быстрая установка (одна команда)

Откройте **Терминал** и выполните:

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/PMCulture-pro/transcribe-app/main/scripts/install.sh)
```

### Или скачайте установщик

1. [Скачайте install.sh](https://github.com/PMCulture-pro/transcribe-app/releases/latest)
2. Откройте **Терминал**
3. Выполните:
   ```bash
   bash ~/Downloads/install.sh
   ```

### Что произойдет при установке?

Установщик покажет что будет скачано:

```
Что будет установлено:

  * Whisper Model (large-v3) - AI модель для транскрибации
    Размер: 3.0 GB

  * Whisper-cpp - Оптимизированный транскрибатор для Apple Silicon
    Размер: ~5 MB

  * FFmpeg - Инструмент для работы с аудио/видео
    Размер: 95 MB

  * Quick Action - Интеграция в контекстное меню Finder
    Размер: <1 MB

Общий объем загрузки: ~3.1 GB
Время установки: ~10-15 минут
```

**Примечание:** Установка может занять 10-15 минут в зависимости от скорости интернета.

---

## Как использовать

### Способ 1: Через контекстное меню (самый простой)

1. Найдите любой видео или аудио файл в **Finder**
2. **Правый клик** на файле
3. Выберите **Quick Actions** → **Транскрибировать**
4. Дождитесь уведомления о завершении
5. Текстовый файл появится рядом с исходным файлом

### Способ 2: Через командную строку

```bash
# Транскрибировать конкретный файл
bash "$HOME/Library/Application Support/Transcribe/bin/transcribe.sh" "путь/к/файлу.mov"
```

---

## Поддерживаемые форматы

### Видео
- `.mov` - QuickTime (OBS Studio, запись экрана macOS)
- `.mp4` - MP4 видео
- `.avi` - AVI видео
- `.mkv` - Matroska видео
- `.webm` - WebM видео
- и другие видео форматы, поддерживаемые FFmpeg

### Аудио
- `.mp3` - MP3 аудио
- `.wav` - WAV аудио
- `.m4a` - M4A аудио
- `.flac` - FLAC аудио
- `.ogg` - OGG аудио
- и другие аудио форматы, поддерживаемые FFmpeg

---

## Производительность

Скорость транскрибации зависит от вашего процессора:

| Процессор | Скорость | Пример |
|-----------|----------|--------|
| **M4 Pro** | ~7x realtime | 30 мин видео → 4.5 мин |
| **M4** | ~6x realtime | 30 мин видео → 5 мин |
| **M3 Pro** | ~6x realtime | 30 мин видео → 5 мин |
| **M3** | ~5x realtime | 30 мин видео → 6 мин |
| **M2 Pro** | ~5x realtime | 30 мин видео → 6 мин |
| **M2** | ~4x realtime | 30 мин видео → 7.5 мин |
| **M1 Pro** | ~4x realtime | 30 мин видео → 7.5 мин |
| **M1** | ~3x realtime | 30 мин видео → 10 мин |

---

## Примеры использования

### Транскрибация видео лекции
```
Файл: lecture.mov (1 час)
Время обработки: ~8-10 минут
Результат: lecture.txt с полным текстом лекции
```

### Транскрибация подкаста
```
Файл: podcast.mp3 (45 минут)
Время обработки: ~6-8 минут
Результат: podcast.txt с текстом подкаста
```

### Транскрибация записи совещания (OBS Studio)
```
Файл: meeting.mov (2 часа)
Время обработки: ~15-20 минут
Результат: meeting.txt с текстом совещания
```

---

## Формат результата

Текстовый файл содержит:

```txt
=========================================
Исходный файл: video.mov
Длительность аудио: 00:30:24
Время транскрибации: 00:04:30
Дата: 2025-10-05 16:33:01
Модель: Whisper Large-v3
=========================================

[Здесь идет полный текст транскрипции]
```

---

## Настройки (для продвинутых)

### Изменить язык транскрибации

По умолчанию используется русский язык. Для изменения отредактируйте скрипт:

```bash
# Открыть скрипт в редакторе
nano "$HOME/Library/Application Support/Transcribe/bin/transcribe.sh"

# Найти строку:
-l ru \

# Заменить на нужный язык:
-l en \  # английский
-l de \  # немецкий
-l fr \  # французский
# и т.д.
```

### Улучшить качество (медленнее, но точнее)

Добавьте параметры в скрипт транскрибации:

```bash
--beam-size 10 \      # улучшает качество
--best-of 10 \        # больше вариантов распознавания
--temperature 0.0 \   # стабильнее результаты
```

---

## Устранение проблем

### Пункт "Транскрибировать" не появляется в меню

1. Перезапустите Finder:
   ```bash
   killall Finder
   ```

2. Очистите кэш служб:
   ```bash
   /System/Library/CoreServices/pbs -flush
   ```

3. Если не помогло - переустановите:
   ```bash
   bash scripts/install.sh
   ```

### Транскрибация не запускается

Проверьте, установлены ли все компоненты:

```bash
# Проверить whisper-cpp
brew list whisper-cpp

# Проверить ffmpeg
which ffmpeg

# Проверить модель
ls "$HOME/Library/Application Support/Transcribe/models/ggml-large-v3.bin"
```

### Низкое качество распознавания

1. Убедитесь, что аудио четкое (нет сильных шумов)
2. Попробуйте использовать параметры улучшения качества (см. "Настройки")
3. Для английского языка измените `-l ru` на `-l en`

### Ошибка "Permission denied"

```bash
# Дать права на выполнение
chmod +x "$HOME/Library/Application Support/Transcribe/bin/transcribe.sh"
```

---

## Удаление

### Автоматическое удаление (рекомендуется)

```bash
bash "$HOME/Library/Application Support/Transcribe/bin/uninstall.sh"
```

Деинсталлятор:
- Покажет что будет удалено и сколько места освободится
- Спросит подтверждение
- Удалит приложение и Quick Action
- Опционально удалит зависимости (если они не нужны)

### Ручное удаление

```bash
# Удалить приложение
rm -rf "$HOME/Library/Application Support/Transcribe"

# Удалить Quick Action
rm -rf "$HOME/Library/Services/Транскрибировать.workflow"

# Перезапустить Finder
killall Finder
```

**Подробнее:** См. [docs/UNINSTALL.md](docs/UNINSTALL.md)

---

## FAQ

### Нужен ли интернет для работы?

Интернет нужен только при установке для скачивания компонентов. После установки приложение работает полностью offline.

### Передаются ли данные куда-либо?

Нет! Все работает локально на вашем компьютере. Никакие аудио, видео или текстовые данные не отправляются в интернет.

### Работает ли на Intel Mac?

Приложение оптимизировано для Apple Silicon (M1/M2/M3/M4). Для Intel процессоров рекомендуется использовать другие решения.

### Почему установка занимает много места?

AI модель для качественного распознавания речи занимает ~3 GB. Это позволяет работать полностью offline и обеспечивает высокое качество.

### Можно ли использовать меньшую модель?

Да, можно скачать модель `tiny`, `base`, `small` или `medium` вместо `large-v3`. Они быстрее, но менее точные.

### Поддерживается ли диаризация (разделение по спикерам)?

Да, но требуется дополнительная настройка. Смотрите раздел "Настройки" или обратитесь к документации.

### Можно ли транскрибировать несколько файлов сразу?

Да! Выделите несколько файлов в Finder, правый клик → Quick Actions → Транскрибировать. Они будут обработаны последовательно.

### Сколько стоит использование?

Приложение полностью бесплатное и с открытым исходным кодом.

---

## Технические детали

### Используемые технологии

- **[Whisper](https://github.com/openai/whisper)** - AI модель от OpenAI для распознавания речи
- **[whisper.cpp](https://github.com/ggerganov/whisper.cpp)** - Оптимизированная C++ реализация с поддержкой Metal (GPU на Apple Silicon)
- **[FFmpeg](https://ffmpeg.org/)** - Обработка аудио и видео
- **Automator** - Интеграция в macOS Finder

### Архитектура

```
Пользователь → Finder (правый клик)
    ↓
Automator Quick Action
    ↓
transcribe.sh (bash скрипт)
    ↓
FFmpeg (извлечение аудио) → whisper-cpp (транскрибация)
    ↓
Текстовый файл .txt
```

### Расположение файлов

```
~/Library/Application Support/Transcribe/
├── bin/
│   ├── transcribe.sh      # Скрипт транскрибации
│   └── uninstall.sh       # Скрипт удаления
└── models/
    └── ggml-large-v3.bin  # AI модель (3 GB)

~/Library/Services/
└── Транскрибировать.workflow  # Quick Action
```

---

## Поддержка и вклад

### Сообщить о проблеме

Если вы столкнулись с проблемой:
1. Проверьте раздел "Устранение проблем" выше
2. Откройте [Issue на GitHub](https://github.com/PMCulture-pro/transcribe-app/issues)
3. Опишите проблему и приложите вывод команд

### Внести вклад

Приветствуются любые улучшения:
- Исправления ошибок
- Новые функции
- Улучшение документации
- Переводы

---

## Лицензия

MIT License - можно свободно использовать, изменять и распространять.

См. [LICENSE](LICENSE)

---

## Благодарности

- **OpenAI** - за модель Whisper
- **Georgi Gerganov** - за whisper.cpp
- **FFmpeg Team** - за FFmpeg
- **Homebrew** - за удобный менеджер пакетов

---

## Контакты

- **GitHub:** https://github.com/PMCulture-pro/transcribe-app
- **Issues:** https://github.com/PMCulture-pro/transcribe-app/issues
- **Discussions:** https://github.com/PMCulture-pro/transcribe-app/discussions

---

**Сделано для macOS**

*Последнее обновление: 2025-10-05*
